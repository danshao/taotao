<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="expires" content="-1">
    <title>Tao Tao 滔滔</title>

    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="js/magicseaweed.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
        var bg = getTT();
        var imgNum = 0;
        var imgLength = bg.length - 1;
        var delay = 500;
        var lock = false;
        var run;
        var type = 0;

        function chgImg(direction, type_user) {
             if (document.images) {
                // pre-loading image
                $("#slideshow").attr("src", "images/loading.png")
                
                // animation
                imgNum = imgNum + direction;
                if (imgNum > imgLength) {
                    imgNum = 0; 
                }
                if (imgNum < 0) { 
                    imgNum = imgLength; 
                }
                // conditional statements to use which graph
                if (type == 0) {
                    for (i = 0; i < 41; i++) {
                        preload(bg[i].swellImage);
                    }
                    $("#slideshow").attr("src", bg[imgNum].swellImage); 
                } else if (type == 1) {
                    for (i = 0; i < 41; i++) {
                        preload(bg[i].periodImage);
                    }
                    $("#slideshow").attr("src", bg[imgNum].periodImage);                   
                } else if (type == 2) {
                    for (i = 0; i < 41; i++) {
                        preload(bg[i].windImage);
                    }
                    $("#slideshow").attr("src", bg[imgNum].windImage);                     
                }
                // change the date 
                $("div#waveDate").text(bg[imgNum].date);
             }
        }

        // preload the images
        function preload(image) {
            img = new Image();
            img.src = image;
        }

        function auto(type_user) {
            // if (lock == true && type != type_user) {
            if (type != type_user) {
                window.clearInterval(run);
                type = type_user;
                if (type_user == 1) {
                    $("#chartkey").attr("class", "chart-key c-scale-PERPW") 
                }
                if (type_user == 2) {
                    $("#chartkey").attr("class", "chart-key c-scale-WMAG") 
                }
                run = setInterval("chgImg(1, " + type_user + ")", delay);
                // lock = false;
            } else {
                window.clearInterval(run);
            // } else if (lock == false) {
                run = setInterval("chgImg(1, " + type + ")", delay);
               // lock = true;
            }
        }

        var url = window.location.toString();
        $(document).ready(function(){
            $('.nav li a').each(function() {
                var myHref = $(this).attr('href');
                if( url.match( myHref )){
                    $(this).addClass("selected");
                }
            });
        });
        </script>
    </head>

    <body onload=auto(0)>
        <div id="container">
                <img id="logo" src="images/logo.png">
                <div id="search"></div>
                <ul class="nav">
                    <li class="nav_home"><a href="index.htm"></a></li>
                    <li class="nav_about"><a href="#about"></a></li>
                    <li class="nav_news"><a href="#news"></a></li>
                    <li class="nav_media"><a href="#media"></a></li>                
                    <li class="nav_wavecheck"><a href="wavecheck.htm"></a></li>
                    <li class="nav_guides"><a href="#guides"></a></li>
                </ul>
                <img id="fb" src="images/fb.png">
        </div>
        <img id="top_bar" src="images/topbar.png">
        <div id="center">
            <div id="chart">
                <div class = "chart-type">
                    <ul>  
                        <li>                            
                            <a href=javascript:auto(0)>SWELL</a>
                        </li>
                        <li>
                            <a href=javascript:auto(1)>PERIOD</a>
                        </li>
                        <li>
                            <a href=javascript:auto(2)>WIND</a>
                        </li>
                        <li>
                            <a>TIDE</a>
                        </li> 
                    </ul>
                </div>
                <div id="anim">
                    <img id="slideshow" src="images/loading.png">
                    <div id="waveDate"></div>
                    <br>
                    <!--
                    <a href = "javascript:chgImg(-1)">Previous</a> &nbsp;|&nbsp;
                    <a href = "javascript:auto()">Auto/Stop</a> &nbsp;|&nbsp; 
                    <a href = "javascript:chgImg(1)">Next</a>
                    -->
                </div>
                <div id = "chartkey" class = "chart-key c-scale-HTSGW"></div>
            </div>
        </div>
        <img id="bottom_bar" src="images/bottombar.png">
    </body>
</html>