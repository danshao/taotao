<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="expires" content="-1">
    <title>Tao Tao 滔滔</title>

    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="js/jqplot/jquery.jqplot.css" />
    <script type="text/javascript" src="js/magicseaweed.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/jqplot/jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="js/jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script type="text/javascript" src="js/jqplot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
    <script type="text/javascript" src="js/jqplot/plugins/jqplot.highlighter.min.js"></script>
    <script type="text/javascript" src="js/jqplot/plugins/jqplot.cursor.min.js"></script>
    <script type="text/javascript" src="js/jqplot/plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script type="text/javascript" src="js/jqplot/plugins/jqplot.trendline.min.js"></script>
    <script type="text/javascript">
        var bg = getTT();
        var imgNum = 0;
        var imgLength = bg.length - 1;
        var delay = 500;
        var lock = false;
        var run;
        var type = 0;

        function chgImg(direction, type_user) {
             if (document.images) {
                // pre-loading image
                $("#slideshow").attr("src", "images/loading.png")
                
                // animation
                imgNum = imgNum + direction;
                if (imgNum > imgLength) {
                    imgNum = 0; 
                }
                if (imgNum < 0) { 
                    imgNum = imgLength; 
                }
                // conditional statements to use which graph
                if (type == 0) {
                    for (i = 0; i < 41; i++) {
                        preload(bg[i].swellImage);
                    }
                    $("#slideshow").attr("src", bg[imgNum].swellImage); 
                } else if (type == 1) {
                    for (i = 0; i < 41; i++) {
                        preload(bg[i].periodImage);
                    }
                    $("#slideshow").attr("src", bg[imgNum].periodImage);                   
                } else if (type == 2) {
                    for (i = 0; i < 41; i++) {
                        preload(bg[i].windImage);
                    }
                    $("#slideshow").attr("src", bg[imgNum].windImage);                     
                }
                // change the date 
                $("div#waveDate").text(bg[imgNum].date);
             }
        }

        // preload the images
        function preload(image) {
            img = new Image();
            img.src = image;
        }

        function auto(type_user) {
            // if (lock == true && type != type_user) {
            if (type != type_user) {
                window.clearInterval(run);
                type = type_user;
                if (type_user == 0) {
                    $("#chartkey").attr("class", "chart-key c-scale-HTSGW")
                }
                if (type_user == 1) {
                    $("#chartkey").attr("class", "chart-key c-scale-PERPW"); 
                }
                if (type_user == 2) {
                    $("#chartkey").attr("class", "chart-key c-scale-WMAG"); 
                }
                run = setInterval("chgImg(1, " + type_user + ")", delay);
                // lock = false;
            } else {
                window.clearInterval(run);
            // } else if (lock == false) {
                run = setInterval("chgImg(1, " + type + ")", delay);
               // lock = true;
            }
        }

        // CSS selection for navigation bar
        var url = window.location.toString();
        $(document).ready(function(){
            $('.nav li a').each(function() {
                var myHref = $(this).attr('href');
                if( url.match( myHref )){
                    $(this).addClass("selected");
                }
            });

            var data1 = [
                          ["08/01/2012 2:29 AM", 0.79],
                          ["08/01/2012 7:35 AM", 0.95],
                          ["08/01/2012 2:31 PM", 0.08],
                          ["08/01/2012 10:18 PM", 1.12],
                          ["08/02/2012 3:16 AM", 0.76],
                          ["08/02/2012 8:41 AM", 0.96],
                          ["08/02/2012 3:17 PM", 0.12],
                          ["08/02/2012 10:55 PM", 1.10],
                          ["08/03/2012 4:02 AM", 0.72],
                          ["08/03/2012 9:39 AM", 0.95],
                          ["08/03/2012 4:02 PM", 0.20],
                          ["08/03/2012 11:30 PM", 1.07]
                        ]
            // var data1 = [['2012-10-26 12:14AM', 0.78], ['2012-10-27 3:14AM', 1]]
            var plot = $.jqplot('tide_chart', [data1], {
                seriesColors: ["#324890"],
                axes: {
                    xaxis: {
                        renderer: $.jqplot.DateAxisRenderer,
                        pad: 0,
                        min: "08/01/2012 2:29 AM",
                        tickOptions: {
                            formatString: "%m-%d&nbsp%H:%M"
                        },
                        showTicks: true
                    },
                    yaxis: {
                        tickOptions: { 
                            formatString:'%.2fm'
                        }
                    }
                },
                series: [{renderer:$.jqplot.TrendLine}],
                grid: {
                    drawGridLines: false
                },
                highlighter: {
                    show: true,
                    sizeAdjust: 7.5
                    // useAxesFormatters: false, 
                    //tooltipFormatString: m'
                },
                cursor: {
                    show: false
                },
                seriesDefaults: {
                    fill: true
                }
            });
        });

        </script>
    </head>

    <body onload=auto(0)>
        <div id="container">
                <img id="logo" src="images/logo.png">
                <div id="search"></div>
                <ul class="nav">
                    <li class="nav_home"><a href="index.htm"></a></li>
                    <li class="nav_about"><a href="#about"></a></li>
                    <li class="nav_news"><a href="#news"></a></li>
                    <li class="nav_media"><a href="#media"></a></li>                
                    <li class="nav_wavecheck"><a href="wavecheck.htm"></a></li>
                    <li class="nav_guides"><a href="#guides"></a></li>
                </ul>
                <img id="fb" src="images/fb.png">
        </div>
        <img id="top_bar" src="images/topbar.png">
        <div id="center">
            <div id="chart">
                <div class = "chart-type">
                    <ul>  
                        <li>                            
                            <a href="#swell" onclick="auto(0); return false;">SWELL</a>
                        </li>
                        <li>
                            <a href="#period" onclick="auto(1); return false;">PERIOD</a>
                        </li>
                        <li>
                            <a href="#wind" onclick="auto(2); return false;">WIND</a>
                        </li>
                    </ul>
                </div>
                <div id="anim">
                    <img id="slideshow" src="images/loading.png">
                    <div id="waveDate"></div>
                    <br>
                    <!--
                    <a href = "javascript:chgImg(-1)">Previous</a> &nbsp;|&nbsp;
                    <a href = "javascript:auto()">Auto/Stop</a> &nbsp;|&nbsp; 
                    <a href = "javascript:chgImg(1)">Next</a>
                    -->
                </div>
                <div id = "chartkey" class = "chart-key c-scale-HTSGW"></div>
                </div>  
                <div id="tide"> 
                    <div id="tide_title">
                        TIDE
                    </div>
                    <div id="tide_chart">
                    </div>
                </div>
            </div>
        </div>
        <img id="bottom_bar" src="images/bottombar.png">
    </body>
</html>